Creación de Script para permitir un rollback al consolidate original Se solicita un script de rollback para volver al consolidate original, por si surgiera algun problema irresoluble con el consolidate preparado en el SP de “summary” (SummaryProc). El rollback de “statusSummary” también se solicitó, pero ya no sería necesario porque se ha hecho retrocompatible utilizando el mismo formato de “lastId” relativo al HIST_STATUS_DETAIL.ID_FINAL_STATUS. Retrocompatibilidad Estos procesos se han montado para ser lo mas retro-compatibles posibles, y al instalarse en un entorno productivo que se ha actualizado hasta esta versión, continuaría los procesos de statusSummary y consolidate, por donde se dejaron. El summary de statusSummaryGroup, una vez puesto en marcha, se podría tirar para atrás y ejecutar la versión anterior de statusSummary sin problema, ya que utiliza el mismo tipo de puntero. El summary de consolidateGroup, una vez puesto en marcha, si se quisiera echar para atrás y volver a la versión anterior, requeriría de la ejecución de un script especifico (LDB-415: Creación de Script para permitir un rollback al consolidate original Pruebas ) el cual repasaría desde el HIST_ADDRESS.TS_EXPIRE mas antiguo hasta el último día consolidado añadiendo los estados finales faltantes y modificando los registros de HIST_ADDRESS para marcarlos como finalizados, consolidados y resumidos. Este proceso parte de una base de un esquema sano (como siempre), si no fuera así se deberían reconstruir los días de resúmenes que hagan falta para dejarlo saneado. Tras esto, se deberían reconstruir las estadísticas de los días del intervalo de consolidación, lo que equivaldría, en el caso que daysToConsolidate fuera 3 a los 3 días anteriores al cambio.